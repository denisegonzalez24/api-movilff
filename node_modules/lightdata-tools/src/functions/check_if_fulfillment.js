import { CustomException } from "../classes/custom_exception.js";
import { executeQuery } from "../db_functions/execute_querys/execute_query.js";

export async function checkIfFulfillment({ db, mlShipmentId }) {
    const checkIfFFA = `SELECT elim FROM envios WHERE superado=0 AND elim=52 AND ml_shipment_id = ?`;
    const ffaRows = await executeQuery({ db: db, query: checkIfFFA, values: [mlShipmentId] });
    if (ffaRows.length > 0) {
        throw new CustomException({
            title: "Fulfillment Error",
            message: "El paquete todavia no esta armado, espera a terminar el proceso y vuelva a intentarlo.",
        });
    }
}