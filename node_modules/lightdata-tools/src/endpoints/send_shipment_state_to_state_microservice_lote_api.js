import { getFechaConHoraLocalDePais } from '../functions/get_fecha_con_hora_local_by_pais.js';
import { generarTokenFechaHoy } from './send_shipment_state_to_state_microservice.js';

export async function sendShipmentStateToStateMicroserviceLoteAPI({
    urlEstadosMicroservice,
    axiosInstance,
    company,
    userId,
    shipmentsDids,
    estado,
    latitud = null,
    longitud = null,
    operacion,
    desde,
}) {
    const message = {
        didempresa: company.did,
        didenvios: shipmentsDids,
        estado: estado,
        subestado: null,
        estadoML: null,
        fecha: getFechaConHoraLocalDePais(company.pais),
        quien: userId,
        operacion,
        latitud,
        longitud,
        desde,
        tkn: generarTokenFechaHoy(company.pais),
    };
    const response = await axiosInstance.post(urlEstadosMicroservice, message);
    return response.data;
}
