import { getFechaConHoraLocalDePais } from '../functions/get_fecha_con_hora_local_by_pais.js';
import { generarTokenFechaHoy } from './send_shipment_state_to_state_microservice.js';

export async function sendShipmentStateToStateMicroserviceAPI({
    urlEstadosMicroservice,
    axiosInstance,
    company,
    userId,
    shipmentId,
    estado,
    latitude,
    longitude,
    desde,
}) {
    const message = {
        didempresa: company.did,
        didenvio: shipmentId,
        estado: estado,
        subestado: null,
        estadoML: null,
        fecha: getFechaConHoraLocalDePais(company.pais),
        quien: userId,
        operacion: desde,
        latitud: latitude,
        longitud: longitude,
        desde,
        tkn: generarTokenFechaHoy(company.pais),
    };
    const response = await axiosInstance.post(urlEstadosMicroservice, message);
    return response.data;
}
